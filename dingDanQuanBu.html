<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	    <title></title>
	    <script src="js/mui.min.js"></script>
	    <script src="js/jquery-3.2.1.min.js"></script>
	    <link href="css/mui.min.css" rel="stylesheet"/>
	    <link href="css/My/dingDanQuanBu.css" rel="stylesheet"/>
	    <link href="css/gouWuChe/gouWuChe.css" rel="stylesheet"/>
	    <script type="text/javascript">
	    	
	   		document.addEventListener('plusready', function(){
	   			//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。"
	   			
	   		});
	   		
	    </script>
	</head>
	<body id="list">
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		    <h1 class="mui-title">我的订单</h1>
		</header>
		<div class="mui-content banner" id="banner">
			<div class="dingDan-tit pagNav" id="pagNav">
				<a class="cur" id="qb">全部</a>
				<a id="dfk">待付款</a>
				<a id="dfh">待发货</a>
				<a id="dsh">待收货</a>
				<a id="dpj">待评价</a>
			</div>
			
			<ul id="ul">
				<li style="left:0" class="li">
					<div class="list_con">
						<div class="dingDan-shangPin">
							<div class="shangJia clear">
								<img src="img/fenLei/logo1.jpg" alt="" />
								<span>Merriea/花王品牌专场</span>
								<span>等待买家付款</span>
							</div>
							<div class="dingDan-shangPin-juTi clear">
								<img src="img/gouWuChe/shangPin1.jpg" alt="" />
								<ul>
									<li>纸尿裤 M64（6-11KG）【4包装】</li>
									<li>通用，<span>L</span></li>
									<li>
										<div>￥<span>329</span></div>
										<div>￥<span>360</span></div>
										<div>&#xe6a6;<span>1</span></div>
									</li>
								</ul>
							</div>
							<p>小计：<a>￥<span>329.00</span></a></p>
							<div class="dingDan-bot">
								<button>取消订单</button>
								<button class="cur" id="fuKuan">付款</button>
							</div>
						</div>
						<div class="dingDan-shangPin">
							<div class="shangJia clear">
								<img src="img/fenLei/logo1.jpg" alt="" />
								<span>Merriea/花王品牌专场</span>
								<span>等待买家付款</span>
							</div>
							<div class="dingDan-shangPin-juTi clear">
								<img src="img/gouWuChe/shangPin1.jpg" alt="" />
								<ul>
									<li>纸尿裤 M64（6-11KG）【4包装】</li>
									<li>通用，<span>L</span></li>
									<li>
										<div>￥<span>329</span></div>
										<div>￥<span>360</span></div>
										<div>&#xe6a6;<span>1</span></div>
									</li>
								</ul>
							</div>
							<p>小计：<a>￥<span>329.00</span></a></p>
							<div class="dingDan-bot">
								<button>取消订单</button>
								<button class="cur" id="fuKuan">付款</button>
							</div>
						</div>
						<div class="dingDan-shangPin">
							<div class="shangJia clear">
								<img src="img/fenLei/logo1.jpg" alt="" />
								<span>宜佳乐/YIJIALE专场</span>
								<span>交易成功</span>
							</div>
							<div class="dingDan-shangPin-juTi clear">
								<img src="img/index/index_floor2.jpg" alt="" />
								<ul>
									<li>宜佳乐 200*180*1cm加厚儿童爬行垫…</li>
									<li>双面A面大富翁+B面…</li>
									<li>
										<div>￥<span>26.9</span></div>
										<div>￥<span>68</span></div>
										<div>&#xe6a6;<span>1</span></div>
									</li>
								</ul>
							</div>
							<p>小计：<a>￥<span>26.9</span></a></p>
							<div class="dingDan-bot">
								<button>删除订单</button>
								<button class="cur">付款</button>
							</div>
						</div>
					</div>
				</li>
				<li style="left:100%" class="li">
					<div class="list_con">
						<div class="dingDan-shangPin">
							<div class="shangJia clear">
								<img src="img/fenLei/logo1.jpg" alt="" />
								<span>Merriea/花王品牌专场</span>
								<span>等待买家付款</span>
							</div>
							<div class="dingDan-shangPin-juTi clear">
								<img src="img/gouWuChe/shangPin1.jpg" alt="" />
								<ul>
									<li>纸尿裤 M64（6-11KG）【4包装】</li>
									<li>通用，<span>L</span></li>
									<li>
										<div>￥<span>329</span></div>
										<div>￥<span>360</span></div>
										<div>&#xe6a6;<span>1</span></div>
									</li>
								</ul>
							</div>
							<p>小计：<a>￥<span>329.00</span></a></p>
							<div class="dingDan-bot">
								<button>联系卖家</button>
								<button>取消订单</button>
								<button class="cur">付款</button>
							</div>
						</div>
						<div class="dingDan-shangPin">
							<div class="shangJia clear">
								<img src="img/fenLei/logo1.jpg" alt="" />
								<span>宜佳乐/YIJIALE专场</span>
								<span>等待买家付款</span>
							</div>
							<div class="dingDan-shangPin-juTi clear">
								<img src="img/index/index_floor2.jpg" alt="" />
								<ul>
									<li>宜佳乐 200*180*1cm加厚儿童爬行垫…</li>
									<li>双面A面大富翁+B面…</li>
									<li>
										<div>￥<span>26.9</span></div>
										<div>￥<span>68</span></div>
										<div>&#xe6a6;<span>1</span></div>
									</li>
								</ul>
							</div>
							<p>小计：<a>￥<span>0.00</span></a></p>
							<div class="dingDan-bot">
								<button>联系卖家</button>
								<button>取消订单</button>
								<button class="cur">付款</button>
							</div>
						</div>	
						<ul class="daiFuKuan-bottom">
							<li>
								<span></span>
								全选
							</li>
							<li>
								<p>总计：￥<span>0.00</span></p>
								<p>不含运费和进口税</p>
							</li>
							<li>合并付款</li>
						</ul>
								
					</div>
				</li>
				<li style="left:100%" class="li">
					<div class="list_con">
						<div class="tuiJian">
							<div class="meiYouJieGuo">
								<img src="img/My/meiYouJieGuo.png" alt="" />
								<p>您还没有相关订单</p>
							</div>
							<p class="tuJian-tit">为您推荐</p>
							<ul>
								<li>
									<img src="img/gouWuChe/shangPin1.jpg" alt="" />
									<p class="shangPin-tit">Merriea/花王  纸尿裤S54 （6-11KG）......</p>
									<div>
										<p>￥<span>329</span></p>
										<p><span>1.0万</span>人已团</p>
									</div>
								</li>
								<li>
									<img src="img/gouWuChe/shangPin2.jpg" alt="" />
									<p class="shangPin-tit">Merriea/花王  纸尿裤S54 （4-8KG）......</p>
									<div>
										<p>￥<strong>59</strong></p>
										<p><span>1.3万</span>人已团</p>
									</div>
								</li>
								<li>
									<img src="img/gouWuChe/shangPin1.jpg" alt="" />
									<p class="shangPin-tit">Merriea/花王  纸尿裤S54 （6-11KG）......</p>
									<div>
										<p>￥<span>329</span></p>
										<p><span>1.0万</span>人已团</p>
									</div>
								</li>
								<li>
									<img src="img/gouWuChe/shangPin2.jpg" alt="" />
									<p class="shangPin-tit">Merriea/花王  纸尿裤S54 （4-8KG）......</p>
									<div>
										<p>￥<span>59</span></p>
										<p><span>1.3万</span>人已团</p>
									</div>
								</li>
							</ul>
						  </div>
					</div>
				</li>
				<li style="left:100%" class="li">
					<div class="list_con">
						<div class="tuiJian">
							<div class="meiYouJieGuo">
								<img src="img/My/meiYouJieGuo.png" alt="" />
								<p>您还没有相关订单</p>
							</div>
							<p class="tuJian-tit">为您推荐</p>
							<ul>
								<li>
									<img src="img/gouWuChe/shangPin1.jpg" alt="" />
									<p class="shangPin-tit">Merriea/花王  纸尿裤S54 （6-11KG）......</p>
									<div>
										<p>￥<span>329</span></p>
										<p><span>1.0万</span>人已团</p>
									</div>
								</li>
								<li>
									<img src="img/gouWuChe/shangPin2.jpg" alt="" />
									<p class="shangPin-tit">Merriea/花王  纸尿裤S54 （4-8KG）......</p>
									<div>
										<p>￥<strong>59</strong></p>
										<p><span>1.3万</span>人已团</p>
									</div>
								</li>
								<li>
									<img src="img/gouWuChe/shangPin1.jpg" alt="" />
									<p class="shangPin-tit">Merriea/花王  纸尿裤S54 （6-11KG）......</p>
									<div>
										<p>￥<span>329</span></p>
										<p><span>1.0万</span>人已团</p>
									</div>
								</li>
								<li>
									<img src="img/gouWuChe/shangPin2.jpg" alt="" />
									<p class="shangPin-tit">Merriea/花王  纸尿裤S54 （4-8KG）......</p>
									<div>
										<p>￥<span>59</span></p>
										<p><span>1.3万</span>人已团</p>
									</div>
								</li>
							</ul>
					  	</div>
					</div>
				</li>
				<li style="left:100%" class="li">
					<div class="list_con">
						<div class="dingDan-shangPin">
							<div class="shangJia clear">
								<i>订单号1102610356</i>
								<span class="yiFa">已发货</span>
							</div>
							<div class="dingDan-shangPin-juTi clear">
								<img src="img/gouWuChe/shangPin1.jpg" alt="" />
								<ul>
									<li>纸尿裤 M64（6-11KG）【4包装】</li>
									<li>通用，<span>L</span></li>
									<li>
										<div>￥<span>329</span></div>
										<div>￥<span>360</span></div>
										<div>&#xe6a6;<span>1</span></div>
									</li>
								</ul>
							</div>
							<p>小计：<a>￥<span>329.00</span></a></p>
							<div class="dingDan-bot">
								<button>再次购买</button>
								<button class="cur" id="pJ"><a href="pingJia.html">评价</a></button>
							</div>
							<!--<script>
								document.getElementById("pJ").addEventListener("tap",function(){
									mui.openWindow({
										url:"pingJia.html",
										id:"pingJia3",
							//						createNew:true,
										show:{
											aniShow:"slide-in-right",
											daration:200
										},
										waiting:{
											title:"正在加载..."
										}
									});
								});
							</script>-->
						</div>
					</div>
					
				</li>
			</ul>
			<div class="left" id="left">&#xe69b;</div>
		    <div class="right" id="right">&#xe69a;</div>
		    
		</div>
		<div id="quXiao">
		    <div>
		    	<h3></h3>
		    	<p>
		    		<span>确定</span>
		    		<span>取消</span>
		    	</p>
		    </div>
		</div>
		<script type="text/javascript">
			
//			document.getElementById("fuKuan").addEventListener("tap",function(){
//				mui.openWindow({
//					url: "pintuan_xiangqing.html",
//					id: "pintuan_xiangqing",
//					show:{
//						aniShow: "slide-in-right",
//						duration: 200
//					},
//					waiting:{title:"正在加载..."}
//				});
//			});
			//	//以下是循环进入详情页js
			window.onload=function(){
				var liA=document.getElementsByTagName("button");
				for(var b=0;b<liA.length;b++){
					console.log(liA[b].innerText);
					if(liA[b].innerText=="付款"){
						liA[b].addEventListener('tap',fuKuan);
					}else if(liA[b].innerText=="再次购买"){
						liA[b].addEventListener('tap',gouMai);
					}else if(liA[b].innerText=="联系卖家"){
						liA[b].addEventListener('tap',LianXi);
					}
				}
			}
			function LianXi(){
				mui.openWindow({
					url:"liaotian.html",
					id:"lianXi2",
							createNew:true, 
					show:{
						aniShow:"slide-in-right",
						daration:200
					},
					waiting:{
						title:"已加载请稍后..."
					}
				});
			}
			function fuKuan(){
				mui.openWindow({
					url:"balance.html",
					id:"balance",
							createNew:true, 
					show:{
						aniShow:"slide-in-right",
						daration:200
					},
					waiting:{
						title:"已加载请稍后..."
					}
				});
			}
			function gouMai(){
				mui.openWindow({
					url:"shangPinXiangQing.html",
					id:"SPXQ",
							createNew:true, 
					show:{
						aniShow:"slide-in-right",
						daration:200
					},
					waiting:{
						title:"已加载请稍后..."
					}
				});
			}
			$(document).ready(function(){
				$("button").click(function(){
					var but=$(this).html();
					
					Index=$(this).parents(".dingDan-shangPin").index();
					Index2=$(this).parents(".dingDan-shangPin").parents(".li").index();
//					alert(Index2);
					if(but=="取消订单"||but=="删除订单"){
//						alert("123")
						$("#quXiao").find("h3").html("您确定要"+but+"?");
						$("#quXiao").css("display","block");
						$("#quXiao span:nth-of-type(2)").click(function(){
							$("#quXiao").css("display","none");
						});
						$("#quXiao span:nth-of-type(1)").click(function(){
//							alert(Index);
							$(".list_con").eq(Index2).find(".dingDan-shangPin").eq(Index).css("display","none");
							$("#quXiao").css("display","none");
						});
					}
					
				})
				
			})
			
			
			var banner=document.getElementById("banner");
		    var Left=document.getElementById("left");
		    var Right=document.getElementById("right");
		    var Ul=document.getElementById("ul");
		    var Li=Ul.getElementsByClassName("li");
		    var pagNav=document.getElementById("pagNav");
		    var n=0;
		    var index=0;
		    var v=0;
		    var animated=false;
			var list_con=document.getElementsByClassName("list_con");
			
		    var icon=pagNav.getElementsByTagName("a");
		    for(var j=0;j<icon.length;j++){
		        icon[j].index=j;
		        icon[j].onclick=function(){
		            if(animated){
		                return
		            }
		            var y;
		            y=(this.index-index)*(-100);
		            n=this.index;
		
		            animate2(y);
		            showBtn();
		            console.log(index+","+n);
		        }
		
		    }
		
		
		    function showBtn(){
		
		        for(var x= 0;x<icon.length;x++){
		            if(icon[x].getAttribute("class")=="cur"){
		                icon[x].className="";
		            }
		        }
		        icon[index].className="cur";
		//        console.log(index);
		    }
		    Left.onclick=function(){
		        if(animated){
		            return
		        }
		        n--;
		        if(n<0){
		            n=Li.length-1;
		        }
		        Li[n].style.left="-100%";
		
		        animate(100);
		        index=n;
		        
		        list_con[n].style.height=document.getElementsByClassName("list_con")[n].clientHeight+"px";
//				list_con[n].style.height=1500+"px";
				Li[n].style.height=list_con[n].style.height;
				banner.style.height=list_con[n].style.height;
		        showBtn();
		    };
		    Right.onclick=function(){
		        if(animated){
		            return
		        }
		        n++;
		        if(n>Li.length-1){
		            n=0;
		        }
		        Li[n].style.left="100%";
		        animate(-100);
		        index=n;
		        console.log(n);
		       	list_con[n].style.height=document.getElementsByClassName("list_con")[n].clientHeight+"px";
//				list_con[n].style.height=1500+"px";
				Li[n].style.height=list_con[n].style.height;
				banner.style.height=list_con[n].style.height;
		        console.log(list_con[n].style.height);
		        showBtn();
		
		    };
		    function animate(offset){
		        animated=true;
		        var offset2=offset;
		        if(offset2>0){
		            offset2=100;
		        }
		        if(offset2<0){
		            offset2=-100;
		        }
		
		        var speed=offset2/20;
		
		        var go=function(){
		//            alert(n);
		            if(speed<0&&parseInt(Li[n].style.left)>0||speed>0&&parseInt(Li[n].style.left)<0){
		                Li[n].style.left=parseInt(Li[n].style.left)+speed+"%";
		                if(speed<0&&n!=0){
		                    Li[n-1].style.left=parseInt(Li[n-1].style.left)+speed+"%";
		                }else if(speed<0&&n==0){
		                    Li[Li.length-1].style.left=parseInt(Li[Li.length-1].style.left)+speed+"%";
		                }else if(speed>0&&n==Li.length-1){
		                    Li[0].style.left=parseInt(Li[0].style.left)+speed+"%";
		                }else if(speed>0&&n!=Li.length-1){
		                    Li[n+1].style.left=parseInt(Li[n+1].style.left)+speed+"%";
		                }
		                setTimeout(go,25);
		            }else{
		                if(index<n){
		                    for(var w=0;w<n;w++){
		                        Li[w].style.left="-100%";
		                    }
		                }
		                if(index>n){
		                    for(var w=index;w>n;w--){
		                        Li[w].style.left="100%";
		                    }
		                }
		                Li[n].style.left="0%";
		                animated=false;
		            }
		        };
		        go();
		        
		    }
		    function animate2(offset){
		        animated=true;
		        var offset2=offset;
		        if(offset2>0){
		            offset2=100;
		        }
		        if(offset2<0){
		            offset2=-100;
		        }
		        var speed=offset2/10;
		        var go=function(){
		            console.log(index);
		            if(speed<0&&parseInt(Li[n].style.left)>0||speed>0&&parseInt(Li[n].style.left)<0){
		                Li[n].style.left=parseInt(Li[n].style.left)+speed+"%";
		                Li[index].style.left=parseInt(Li[index].style.left)+speed+"%";
		
		                setTimeout(go,10);
		            }else{
		
		                if(index<n){
		                    for(var w=0;w<n;w++){
		                        Li[w].style.left="-100%";
		                    }
		                }
		                if(index>n){
		                    for(var w=index;w>n;w--){
		                        Li[w].style.left="100%";
		                    }
		                }
		
		
		                Li[n].style.left="0%";
		                animated=false;
		
		                index=n;
		                showBtn();
		
		            }
		        };
		        go();
		    }
		
		    window.addEventListener("load",load);
		    function load(e) {
		        var a,b,c,d,e;
//		        e.preventDefault();
		        document.addEventListener("touchstart",touch1);
		        document.addEventListener("touchmove",touch1);
		        document.addEventListener("touchend",touch1);
//		        Left.addEventListener("touchend",touch2);
//		        Right.addEventListener("touchend",touch3);
		        for(var p=0;p<5;p++){
		            icon[p].addEventListener("touchstart",touch_page);
		        }
		        function touch_page(){
		            event=event||window.event;
		            var con=document.getElementById("con");
		            switch (event.type) {
		                case "touchstart":
		                    if (animated) {
		                        return
		                    }
		                    var y;
		                    y = (this.index - index) * (-100);
		                    n = this.index;
		
		                    animate2(y);
		
		                    break;
		            }
		//            alert(this.index);
		
		        }
		
//		        function touch3() {
//		            Right.onclick();
//		        }
//		        function touch2() {
//		            Left.onclick();
//		        }
		        function touch1(event){
		            event=event||window.event;
		            var con=document.getElementById("con");
		            switch (event.type){
		                case "touchstart":
//		                	document.addEventListener('touchstart', touch1, false);
							var touch = event.targetTouches[0];     //touches数组对象获得屏幕上所有的touch，取第一个touch
			                startPos = {x:touch.pageX,y:touch.pageY,time:+new Date};    //取第一个touch的坐标值
			                isScrolling = 0;   //这个参数判断是垂直滚动还是水平滚动
//		                    
//		                    event.stopPropagation();
		                    a=Math.round(event.touches[0].pageX);
		                    e=Math.round(event.touches[0].pageY);
		                    break;
		                case "touchmove":
							
							g=Math.round(event.touches[0].pageX);
							d=Math.round(event.touches[0].pageY);
							var touch = event.targetTouches[0];
							w=g-a;
							h=d-e;
			                isScrolling = Math.abs(w) < Math.abs(h) ? 1:0;
			                if(isScrolling === 0){
                    			event.preventDefault(); 
			                }
							console.log(w+","+h+","+isScrolling);
		                    break;
		                case "touchend":
		                    b=Math.round(event.changedTouches[0].pageX);
		                    c=a-b;
		                    if(isScrolling === 0){
			                    if (c<-200){
			                        Left.onclick();
			
			                    }
			                    if (c>200){
			                        Right.onclick();
			                    }
		                    }
//		
		            }
		        }
		    }

		    
		    document.addEventListener('goAll',function () {
			    var qb = document.getElementById("qb");
			    //模拟首页点击
			    mui.trigger(qb,'tap');
			    //切换选项卡高亮
			    var current = document.querySelector(".banner>.pagNav>.cur");
			    if(qb!==current){
			        current.classList.remove('cur');
			        qb.classList.add('cur');
			    }
			    n=0;
			    list_con[n].style.height=document.getElementsByClassName("list_con")[n].clientHeight+"px";
//				list_con[n].style.height=1500+"px";
				Li[n].style.height=list_con[n].style.height;
				banner.style.height=list_con[n].style.height;
		        console.log(list_con[n].style.height);
			});
			
			 document.addEventListener('goPay',function () {
			 	console.log("123");
			    var dfk = document.getElementById("dfk");
			    //模拟首页点击
			    mui.trigger(dfk,'tap');
			    //切换选项卡高亮
			    var current = document.querySelector(".banner>.pagNav>.cur");
			    if(dfk!==current){
			        current.classList.remove('cur');
			        dfk.classList.add('cur');
			    }
			    n=0;
			    Right.onclick();
			    
			});
			
			document.addEventListener('goDfh',function () {
			 	console.log("123");
			    var dfh = document.getElementById("dfh");
			    //模拟首页点击
			    mui.trigger(dfh,'tap');
			    //切换选项卡高亮
			    var current = document.querySelector(".banner>.pagNav>.cur");
			    if(dfh!==current){
			        current.classList.remove('cur');
			        dfh.classList.add('cur');
			    }
			    n=1;
			    Right.onclick();
			    
			});
			
			document.addEventListener('goDsh',function () {
			 	console.log("123");
			    var dsh = document.getElementById("dfh");
			    //模拟首页点击
			    mui.trigger(dsh,'tap');
			    //切换选项卡高亮
			    var current = document.querySelector(".banner>.pagNav>.cur");
			    if(dsh!==current){
			        current.classList.remove('cur');
			        dsh.classList.add('cur');
			    }
			    n=2;
			    Right.onclick();
			    
			});
			document.addEventListener('goDpj',function () {
			 	console.log("123");
			    var dpj = document.getElementById("dpj");
			    //模拟首页点击
			    mui.trigger(dpj,'tap');
			    //切换选项卡高亮
			    var current = document.querySelector(".banner>.pagNav>.cur");
			    if(dpj!==current){
			        current.classList.remove('cur');
			        dpj.classList.add('cur');
			    }
			    n=3;
			    Right.onclick();
			    
			});
			
		</script>
	</body>
</html>
